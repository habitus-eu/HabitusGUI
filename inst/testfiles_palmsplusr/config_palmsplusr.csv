context,name,formula,domain_field,after_conversion,start_criteria,end_criteria
palmsplus_field,weekday,dow < 6,FALSE,NA,,
palmsplus_field,weekend,dow > 5,FALSE,NA,,
palmsplus_field,indoors,iov == 3,FALSE,NA,,
palmsplus_field,outdoors,iov == 1,FALSE,NA,,
palmsplus_field,in_vehicle,iov == 2,FALSE,NA,,
palmsplus_field,inserted,fixtypecode == 6,FALSE,NA,,
palmsplus_field,pedestrian,tripmot == 1,FALSE,NA,,
palmsplus_field,bicycle,tripmot == 2,FALSE,NA,,
palmsplus_field,vehicle,tripmot == 3,FALSE,NA,,
palmsplus_field,nonwear,activityintensity < 0,TRUE,NA,,
palmsplus_field,wear,activityintensity >= 0,TRUE,NA,,
palmsplus_field,sedentary,activityintensity == 0,TRUE,NA,,
palmsplus_field,light,activityintensity == 1,TRUE,NA,,
palmsplus_field,moderate,activityintensity == 2,TRUE,NA,,
palmsplus_field,vigorous,activityintensity == 3,TRUE,NA,,
palmsplus_field,mvpa,moderate + vigorous,TRUE,NA,,
palmsplus_field,at_home,"palms_in_polygon(datai, polygons = dplyr::filter(home, identifier == i), identifier)",NA,,,
palmsplus_field,at_school,"palms_in_polygon(datai, polygons = dplyr::filter(school, school_id == participant_basis %>% filter(identifier == i) %>% pull(school_id)))",NA,,,
palmsplus_field,at_home_nbh,"palms_in_polygon(datai, polygons = dplyr::filter(home_nbh, identifier == i), identifier)",NA,,,
palmsplus_field,at_school_nbh,"palms_in_polygon(datai, polygons = dplyr::filter(school_nbh, school_id == participant_basis %>% filter(identifier == i) %>% pull(school_id)))",NA,,,
trajectory_field,mot,first(tripmot),NA,FALSE,,
trajectory_field,date,first(as.Date(datetime)),NA,FALSE,,
trajectory_field,start,datetime[triptype==1],NA,FALSE,,
trajectory_field,end,datetime[triptype==4],NA,FALSE,,
trajectory_field,duration,as.numeric(difftime(end,NA,,,
trajectory_field,nonwear,sum(activityintensity < 0) * 15,NA,FALSE,,
trajectory_field,wear,sum(activityintensity >= 0) * 15,NA,FALSE,,
trajectory_field,sedentary,sum(activityintensity == 1) * 15,NA,FALSE,,
trajectory_field,light,sum(activityintensity == 1) * 15,NA,FALSE,,
trajectory_field,moderate,sum(activityintensity == 2) * 15,NA,FALSE,,
trajectory_field,vigorous,sum(activityintensity == 3) * 15,NA,FALSE,,
trajectory_field,mvpa,moderate + vigorous,NA,FALSE,,
trajectory_field,length,as.numeric(st_length(geometry)),NA,TRUE,,
trajectory_field,speed,(length / duration) * 3.6,NA,TRUE,,
trajectory_field,home_school,at_home,NA,at_home,,
trajectory_field,school_home,at_school,NA,at_home,,
trajectory_field,school_school,at_school,NA,at_home,,
trajectory_field,home_home,at_home,NA,at_home,,
multimodal_field,duration,sum,NA,NA,,
multimodal_field,nonwear,sum,NA,NA,,
multimodal_field,wear,sum,NA,NA,,
multimodal_field,sedentary,sum,NA,NA,,
multimodal_field,light,sum,NA,NA,,
multimodal_field,moderate,sum,NA,NA,,
multimodal_field,vigorous,sum,NA,NA,,
multimodal_field,mvpa,sum,NA,NA,,
multimodal_field,length,sum,NA,NA,,
multimodal_field,speed,mean,NA,NA,,
trajectory_location,home_school,,NA,,at_home,at_school
trajectory_location,school_home,,NA,,at_school,at_home
trajectory_location,school_school,,NA,,at_school,at_school
trajectory_location,home_home,,NA,,at_home,at_home
palmsplus_field,home,at_home,FALSE,,,
palmsplus_field,school,(!at_home & at_school),FALSE,,,
palmsplus_field,transport,!at_home & !(at_school) & (pedestrian | bicycle | vehicle),FALSE,,,
palmsplus_field,home_nbh,!at_home & !(at_school) & (!pedestrian & !bicycle & !vehicle) & at_home_nbh,FALSE,,,
palmsplus_field,school_nbh,!at_home & !(at_school) & (!pedestrian & !bicycle & !vehicle) &  !(at_home_nbh) & at_school_nbh,FALSE,,,
palmsplus_field,other,!at_home & !(at_school) & (!pedestrian & !bicycle & !vehicle) & !(at_home_nbh) & !(at_school_nbh),FALSE,,,
